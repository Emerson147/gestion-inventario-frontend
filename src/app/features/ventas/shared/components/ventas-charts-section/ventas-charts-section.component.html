<!-- SECTION 2: CHARTS & GOALS -->
<div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
  <!-- CHART: SALES EVOLUTION -->
  <div
    class="xl:col-span-2 bg-white dark:bg-surface-900 rounded-[2rem] p-6 lg:p-8 border border-surface-200 dark:border-surface-800 shadow-sm relative overflow-hidden"
  >
    <!-- Header -->
    <div
      class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6"
    >
      <div>
        <h3
          class="text-lg font-bold text-surface-900 dark:text-surface-0 flex items-center gap-2"
        >
          <div
            class="w-8 h-8 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400"
          >
            <i class="pi pi-chart-line text-sm"></i>
          </div>
          Evolución de Ventas
        </h3>
        <p class="text-sm text-surface-500 dark:text-surface-400 mt-1 ml-10">
          Comportamiento histórico mensual
        </p>
      </div>
      <p-selectButton
        [options]="tiposGrafico"
        [(ngModel)]="tipoGraficoVentas"
        (ngModelChange)="onTipoGraficoChange($event)"
        optionLabel="label"
        optionValue="value"
        styleClass="zen-select-button-sm"
      ></p-selectButton>
    </div>

    <!-- Chart Container -->
    <div class="relative h-[300px] w-full">
      <p-chart
        type="line"
        [data]="datosGraficoVentas"
        [options]="opcionesGraficoVentas"
        height="100%"
      ></p-chart>
    </div>
  </div>

  <!-- CHART: MONTHLY GOAL -->
  <div
    class="bg-white dark:bg-surface-900 rounded-[2rem] p-6 lg:p-8 border border-surface-200 dark:border-surface-800 shadow-sm flex flex-col justify-between"
  >
    <div class="mb-6">
      <h3
        class="text-lg font-bold text-surface-900 dark:text-surface-0 flex items-center gap-2 mb-1"
      >
        <div
          class="w-8 h-8 rounded-lg bg-red-50 dark:bg-red-900/20 flex items-center justify-center text-red-600 dark:text-red-400"
        >
          <i class="pi pi-target text-sm"></i>
        </div>
        Meta Mensual
      </h3>
      <p class="text-sm text-surface-500 dark:text-surface-400 ml-10">
        Progreso del objetivo actual
      </p>
    </div>

    <div class="relative flex-1 flex items-center justify-center py-4">
      <div
        class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none"
      >
        <span
          class="text-4xl font-black text-surface-900 dark:text-surface-0 tracking-tighter"
          >{{ progresoMeta }}%</span
        >
        <span
          class="text-[10px] font-bold text-surface-400 uppercase tracking-widest mt-1"
          >Logrado</span
        >
      </div>
      <p-chart
        type="doughnut"
        [data]="datosGraficoMeta"
        [options]="opcionesGraficoCircular"
        width="220"
        height="220"
      ></p-chart>
    </div>

    <div
      class="mt-4 pt-4 border-t border-surface-100 dark:border-surface-800 flex justify-between items-center"
    >
      <span class="text-xs font-bold text-surface-500 uppercase"
        >Objetivo Total</span
      >
      <span
        class="text-xl font-black text-surface-900 dark:text-surface-0 font-mono"
        >S/. {{ metaMensual | number: "1.0-0" }}</span
      >
    </div>
  </div>
</div>
